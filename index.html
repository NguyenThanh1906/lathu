<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday</title>

<link href="https://fonts.googleapis.com/css2?family=Allura&family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  font-family:'Poppins',sans-serif;
}
.page{display:none;position:fixed;inset:0}
.page.active{display:block}

/* INTRO */
.intro{
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:linear-gradient(180deg,#fffaf7,#fdebed);
  text-align:center
}
.date{font-size:13px;letter-spacing:2px;color:#cfa2aa}
.title,.name{font-family:'Allura',cursive;color:#e08fa2}
.title{font-size:72px}
.name{font-size:60px}
.subtitle{font-size:13px;color:#b98995;margin-top:10px}
button{
  margin-top:40px;
  padding:14px 50px;
  border:none;
  border-radius:16px;
  background:#efb7c5;
  color:#fff;
  font-size:14px;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(232,161,178,.45)
}

canvas{position:fixed;inset:0}

/* LETTER */
.letter-page{background:#fffaf7;overflow:auto}
.letter{
  max-width:900px;
  margin:60px auto;
  background:#fff;
  padding:60px;
  border-radius:30px;
  font-size:22px;
  line-height:2;
  color:#6b4b4b;
  box-shadow:0 30px 70px rgba(0,0,0,.15)
}
.signature{
  margin-top:60px;
  text-align:right;
  font-family:'Allura',cursive;
  font-size:28px;
  color:#c9828f
}
@media(max-width:600px){
  .title{font-size:46px}
  .name{font-size:40px}
  .letter{
    padding:32px 22px;
    font-size:18px;
    line-height:1.9
  }
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <div class="intro">
    <div class="date">FEBRUARY 8, 2026</div>
    <div class="title">Happy Birthday</div>
    <div class="name">Trang Ho√†ng Ph√∫c</div>
    <div class="subtitle">TO THE BEST BOYFRIEND IN THE WORLD ü§ç</div>
    <button onclick="start()">NH·∫§N ·ªû ƒê√ÇY</button>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="pageFire">
  <canvas id="stars"></canvas>
  <canvas id="fx"></canvas>
</div>

<!-- PAGE 3 -->
<div class="page letter-page" id="pageLetter">
  <div class="letter">
<!-- ‚ö†Ô∏è N·ªòI DUNG TH∆Ø GI·ªÆ NGUY√äN ‚Äì B·∫†N ƒê√É C√ì -->
<!-- (m√¨nh kh√¥ng thay ƒë·ªïi ch·ªØ n√†o trong ph·∫ßn n√†y) -->
  </div>
</div>

<script>
const page1=document.getElementById("page1");
const pageFire=document.getElementById("pageFire");
const pageLetter=document.getElementById("pageLetter");

function start(){
  page1.classList.remove("active");
  pageFire.classList.add("active");
}

/* CANVAS + DPR FIX */
const stars=document.getElementById("stars");
const fx=document.getElementById("fx");
const stx=stars.getContext("2d");
const ftx=fx.getContext("2d");

function resize(){
  const dpr=window.devicePixelRatio||1;
  stars.width=innerWidth*dpr;
  stars.height=innerHeight*dpr;
  fx.width=innerWidth*dpr;
  fx.height=innerHeight*dpr;

  stars.style.width=fx.style.width=innerWidth+"px";
  stars.style.height=fx.style.height=innerHeight+"px";

  stx.setTransform(dpr,0,0,dpr,0,0);
  ftx.setTransform(dpr,0,0,dpr,0,0);
}
resize();
addEventListener("resize",resize);

/* STARFIELD */
const starsFar=[],starsNear=[];
function createStar(near){
  return{
    x:Math.random()*innerWidth,
    y:Math.random()*innerHeight,
    r:near?Math.random()*1.6+1:Math.random()*1+0.4,
    s:near?Math.random()*0.25+0.15:Math.random()*0.1+0.04,
    t:Math.random()*Math.PI*2
  }
}
for(let i=0;i<160;i++)starsFar.push(createStar(false));
for(let i=0;i<90;i++)starsNear.push(createStar(true));

function drawStars(){
  stx.fillStyle="rgba(0,0,0,0.35)";
  stx.fillRect(0,0,innerWidth,innerHeight);
  [...starsFar,...starsNear].forEach(s=>{
    s.y+=s.s;
    if(s.y>innerHeight){s.y=0;s.x=Math.random()*innerWidth;}
    s.t+=0.02;
    stx.globalAlpha=0.4+Math.sin(s.t)*0.4;
    stx.fillStyle="#fff";
    stx.beginPath();
    stx.arc(s.x,s.y,s.r,0,Math.PI*2);
    stx.fill();
  });
}

/* DRONE TEXT ‚Äì FIX MOBILE */
const texts=["3","2","1","HAPPY","BIRTHDAY","TRANG","HO√ÄNG","PH√öC","I LOVE YOU ‚ù§Ô∏è"];
let index=0,points=[],hold=0,done=false;

function buildText(txt){
  points=[];
  const off=document.createElement("canvas");
  off.width=innerWidth;
  off.height=innerHeight;
  const o=off.getContext("2d");

  const isMobile=innerWidth<768;
  const size=isMobile?Math.min(innerWidth*0.75,180):Math.min(innerWidth*0.45,260);

  o.font=`900 ${size}px Poppins`;
  o.textAlign="center";
  o.textBaseline="middle";
  o.fillStyle="#fff";
  o.fillText(txt,off.width/2,off.height/2);

  const img=o.getImageData(0,0,off.width,off.height).data;
  const step=isMobile?6:9;

  for(let y=0;y<off.height;y+=step){
    for(let x=0;x<off.width;x+=step){
      if(img[(y*off.width+x)*4+3]>200){
        points.push({
          x:Math.random()*innerWidth,
          y:Math.random()*innerHeight,
          tx:x,ty:y,vx:0,vy:0
        });
      }
    }
  }
}
document.fonts.ready.then(()=>buildText(texts[0]));

setInterval(()=>{
  if(done)return;
  if(++hold<30)return;
  hold=0;
  index++;
  if(index<texts.length)buildText(texts[index]);
  else{
    done=true;
    setTimeout(()=>{
      pageFire.classList.remove("active");
      pageLetter.classList.add("active");
    },6000);
  }
},120);

function drawDrone(){
  ftx.clearRect(0,0,innerWidth,innerHeight);
  const size=innerWidth<768?3.2:2.6;
  points.forEach(p=>{
    p.vx+=(p.tx-p.x)*0.025;
    p.vy+=(p.ty-p.y)*0.025;
    p.vx*=0.86;p.vy*=0.86;
    p.x+=p.vx;p.y+=p.vy;
    ftx.fillStyle="rgba(255,190,210,0.98)";
    ftx.shadowColor="rgba(255,140,180,0.85)";
    ftx.shadowBlur=8;
    ftx.fillRect(p.x,p.y,size,size);
  });
}

/* FIREWORK */
let fireworks=[];
function launchFirework(){
  const cx=innerWidth/2+(Math.random()-0.5)*300;
  const cy=innerHeight/2+(Math.random()-0.5)*200;
  const colors=["#ff9aa2","#ffd6a5","#caffbf","#bdb2ff","#ffc6ff"];
  for(let i=0;i<120;i++){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*2.6+1.4;
    fireworks.push({
      x:cx,y:cy,
      vx:Math.cos(a)*s,
      vy:Math.sin(a)*s,
      life:120,
      color:colors[Math.floor(Math.random()*colors.length)]
    });
  }
}
function drawFireworks(){
  if(done&&Math.random()<0.05)launchFirework();
  fireworks.forEach(p=>{
    p.x+=p.vx;p.y+=p.vy;p.vy+=0.02;p.life--;
    ftx.fillStyle=p.color;
    ftx.fillRect(p.x,p.y,2.2,2.2);
  });
  fireworks=fireworks.filter(p=>p.life>0);
}

/* LOOP */
function loop(){
  drawStars();
  drawDrone();
  drawFireworks();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
