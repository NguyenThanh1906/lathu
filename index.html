<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday</title>

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Allura&family=Poppins:wght@700;800&family=Noto+Serif:ital@0;1&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;padding:0;
  background:#000;
  overflow:hidden;
  font-family:'Poppins',sans-serif;
}
.page{
  position:fixed;
  inset:0;
  display:none;
}
.page.active{display:block}
canvas{position:fixed;inset:0}

/* ===== PAGE 1 ‚Äì INTRO ===== */
.intro{
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  background:linear-gradient(180deg,#fffaf7,#fdebed);
}
.date{
  font-size:13px;
  letter-spacing:2px;
  color:#cfa2aa;
}
.title{
  font-family:'Allura',cursive;
  font-size:72px;
  color:#e08fa2;
}
.name{
  font-family:'Allura',cursive;
  font-size:60px;
  color:#e08fa2;
}
.subtitle{
  font-size:13px;
  color:#b98995;
  margin-top:10px;
}
.start-btn{
  margin-top:40px;
  padding:14px 50px;
  border:none;
  border-radius:16px;
  background:#efb7c5;
  color:#fff;
  font-size:14px;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(232,161,178,.45);
}

/* ===== PAGE 3 ‚Äì LETTER (FIX FONT) ===== */
#letterPage{
  background:#fffaf7;
  overflow:auto;
  opacity:0;
  pointer-events:none;
  transition:opacity 1.2s ease;
}
#letterPage.active{
  opacity:1;
  pointer-events:auto;
}
.letter{
  max-width:900px;
  margin:60px auto;
  background:#fff;
  padding:60px;
  border-radius:30px;

  /* FIX L·ªñI FONT TI·∫æNG VI·ªÜT */
  font-family:'Noto Serif', serif;

  font-size:22px;
  line-height:2;
  color:#6b4b4b;
  box-shadow:0 30px 70px rgba(0,0,0,.15);
}
.signature{
  margin-top:60px;
  text-align:right;
}
.signature .sig-line{
  font-family:'Allura',cursive;
  font-size:30px;
  color:#c9828f;
}
.signature .sig-sub{
  font-size:18px;
  color:#8a6464;
}
@media(max-width:600px){
  .title{font-size:46px}
  .name{font-size:40px}
  .letter{padding:35px;font-size:19px}
}
</style>
</head>

<body>

<!-- ===== PAGE 1 ===== -->
<div class="page active" id="page1">
  <div class="intro">
    <div class="date">FEBRUARY 8, 2026</div>
    <div class="title">Happy Birthday</div>
    <div class="name">Trang Ho√†ng Ph√∫c</div>
    <div class="subtitle">TO THE BEST BOYFRIEND IN THE WORLD ü§ç</div>
    <button class="start-btn" onclick="startShow()">NH·∫§N ·ªû ƒê√ÇY</button>
  </div>
</div>

<!-- ===== PAGE 2 ===== -->
<div class="page" id="page2">
  <canvas id="stars"></canvas>
  <canvas id="fx"></canvas>
</div>

<!-- ===== PAGE 3 ===== -->
<div class="page" id="letterPage">
  <div class="letter">

<p>Anh √†,</p>

<p>Sinh nh·∫≠t anh, em ƒë√£ suy nghƒ© r·∫•t l√¢u m·ªõi vi·∫øt nh·ªØng d√≤ng n√†y. Kh√¥ng ph·∫£i v√¨ em kh√¥ng bi·∫øt n√≥i g√¨, m√† v√¨ em s·ª£ nh·ªØng g√¨ em vi·∫øt ra v·∫´n ch∆∞a ƒë·ªß ƒë·ªÉ n√≥i h·∫øt nh·ªØng g√¨ anh ƒë√£ d√†nh cho em. Em kh√¥ng bi·∫øt t·∫∑ng g√¨ cho anh m·ªõi th·∫≠t s·ª± √Ω nghƒ©a. Em ch·ªâ mong l√° th∆∞ n√†y, c√πng v·ªõi m√≥n qu√† nh·ªè ƒëi k√®m, c√≥ th·ªÉ l√†m anh vui v√† c·∫£m nh·∫≠n ƒë∆∞·ª£c t√¨nh c·∫£m em d√†nh cho anh.</p>

<p>Khi nghƒ© ƒë·∫øn anh, ƒëi·ªÅu ƒë·∫ßu ti√™n em c·∫£m nh·∫≠n ƒë∆∞·ª£c lu√¥n l√† s·ª± an t√¢m. Anh th∆∞∆°ng em r·∫•t nhi·ªÅu. Em th√≠ch g√¨, mu·ªën g√¨, trong kh·∫£ nƒÉng c·ªßa m√¨nh anh lu√¥n c·ªë g·∫Øng cho em. Ch∆∞a bao gi·ªù anh l√†m em c·∫£m th·∫•y m√¨nh l√† ng∆∞·ªùi ƒë√≤i h·ªèi hay phi·ªÅn ph·ª©c.</p>

<p>Anh cho em c·∫£m gi√°c an to√†n theo c√°ch r·∫•t ri√™ng. Ch·ªâ c·∫ßn em b·ªánh nh·∫π th√¥i, ng∆∞·ªùi lo l·∫Øng nh·∫•t c≈©ng l√† anh. Nh·ªØng ƒëi·ªÅu nh·ªè v·∫≠y th√¥i nh∆∞ng em nh·ªõ r·∫•t l√¢u.</p>

<p>Sinh nh·∫≠t anh, em ch·ªâ mong anh lu√¥n kh·ªèe m·∫°nh, trong l√≤ng nh·∫π nh√†ng v√† m·ªói ng√†y ƒë·ªÅu c√≥ l√Ω do ƒë·ªÉ m·ªâm c∆∞·ªùi.</p>

<div class="signature">
  <div class="sig-line">Ch√∫c m·ª´ng sinh nh·∫≠t anh ‚ù§Ô∏è</div>
  <div class="sig-sub">Em th∆∞∆°ng anh r·∫•t nhi·ªÅu</div>
</div>

  </div>
</div>

<script>
/* ===== PAGE CONTROL ===== */
const page1=document.getElementById("page1");
const page2=document.getElementById("page2");
const pageLetter=document.getElementById("letterPage");

function startShow(){
  page1.classList.remove("active");
  page2.classList.add("active");
}

/* ===== CANVAS ===== */
const stars=document.getElementById("stars");
const fx=document.getElementById("fx");
const stx=stars.getContext("2d");
const ftx=fx.getContext("2d");

function resize(){
  stars.width=fx.width=innerWidth;
  stars.height=fx.height=innerHeight;
}
resize(); addEventListener("resize",resize);

/* ===== STARFIELD ===== */
const starArr=[];
for(let i=0;i<220;i++){
  starArr.push({
    x:Math.random()*innerWidth,
    y:Math.random()*innerHeight,
    r:Math.random()*1.4+0.4,
    s:Math.random()*0.15+0.05,
    t:Math.random()*Math.PI*2
  });
}
function drawStars(){
  stx.fillStyle="rgba(0,0,0,0.35)";
  stx.fillRect(0,0,stars.width,stars.height);
  starArr.forEach(s=>{
    s.y+=s.s;
    if(s.y>stars.height){s.y=0;s.x=Math.random()*stars.width}
    s.t+=0.03;
    stx.globalAlpha=0.5+Math.sin(s.t)*0.4;
    stx.fillStyle="#fff";
    stx.beginPath();
    stx.arc(s.x,s.y,s.r,0,Math.PI*2);
    stx.fill();
  });
}

/* ===== DRONE TEXT ===== */
const texts=["3","2","1","HAPPY","BIRTHDAY","TRANG","HO√ÄNG","PH√öC","LOVE YOU ‚ù§Ô∏è"];
let idx=0,points=[],hold=0;
let isLove=false,stable=0,fireCount=0,goLetter=false;

function buildText(txt){
  points=[];
  isLove=txt.includes("LOVE");
  stable=0; fireCount=0;

  const off=document.createElement("canvas");
  off.width=fx.width; off.height=fx.height;
  const o=off.getContext("2d");

  const base=Math.min(innerWidth,innerHeight);
  const isNumber=/^[0-9]+$/.test(txt);
  let fontSize=isNumber?base*0.25:base*0.38;

  o.textAlign="center";
  o.textBaseline="middle";
  o.fillStyle="#fff";

  while(true){
    o.font=`800 ${fontSize}px Poppins`;
    if(o.measureText(txt).width<fx.width*0.9) break;
    fontSize*=0.95;
  }

  o.fillText(txt,fx.width/2,fx.height/2);

  const img=o.getImageData(0,0,fx.width,fx.height).data;
  const step=innerWidth<768?5:7;

  for(let y=0;y<fx.height;y+=step){
    for(let x=0;x<fx.width;x+=step){
      if(img[(y*fx.width+x)*4+3]>200){
        points.push({
          x:Math.random()*fx.width,
          y:Math.random()*fx.height,
          tx:x,ty:y,vx:0,vy:0
        });
      }
    }
  }
}
buildText(texts[0]);

setInterval(()=>{
  if(++hold<35) return;
  hold=0;
  idx++;
  if(idx<texts.length) buildText(texts[idx]);
},120);

let fireworks=[];
function launchFirework(){
  const cx=fx.width/2+(Math.random()-0.5)*220;
  const cy=fx.height/2+(Math.random()-0.5)*140;
  const colors=["#ff9aa2","#ffd6a5","#caffbf","#bdb2ff","#ffc6ff"];
  for(let i=0;i<150;i++){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*3+1.5;
    fireworks.push({
      x:cx,y:cy,
      vx:Math.cos(a)*s,
      vy:Math.sin(a)*s,
      life:100,
      color:colors[Math.floor(Math.random()*colors.length)]
    });
  }
}

function drawDrone(){
  ftx.clearRect(0,0,fx.width,fx.height);
  let moving=false;
  points.forEach(p=>{
    p.vx+=(p.tx-p.x)*0.02;
    p.vy+=(p.ty-p.y)*0.02;
    p.vx*=0.85; p.vy*=0.85;
    p.x+=p.vx; p.y+=p.vy;
    if(Math.abs(p.vx)+Math.abs(p.vy)>0.4) moving=true;
    ftx.fillStyle="rgba(255,180,200,0.95)";
    ftx.fillRect(p.x,p.y,2.6,2.6);
  });

  if(isLove && !moving && fireCount<6){
    stable++;
    if(stable>25){
      launchFirework();
      fireCount++;
      stable=0;
    }
  }

  if(isLove && fireCount>=6 && fireworks.length===0 && !goLetter){
    goLetter=true;
    setTimeout(()=>{
      page2.classList.remove("active");
      pageLetter.classList.add("active");
    },1200);
  }
}

function drawFireworks(){
  fireworks.forEach(p=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.vy+=0.02;
    p.life--;
    ftx.fillStyle=p.color;
    ftx.fillRect(p.x,p.y,2.2,2.2);
  });
  fireworks=fireworks.filter(p=>p.life>0);
}

function loop(){
  drawStars();
  drawDrone();
  drawFireworks();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
